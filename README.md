# GQL ANTLR (gql-antlr)
This repository contains a lanuguage-independent [ANTLR](https://www.antlr.org/) grammar for Graph Query Language (GQL) based on the December 2023
GQL Specification Final Draft. It is designed to be included as a submodule in other
repositories.

Using the ANTLR tools, language-dependent parsers can be generated by infrastructure
code in the parent repository.

Typically, the lexer rules and parser rules are contained in separate files. e.g. GQLLexer.g4
and GQLParser.g4. But there is currently a bug in the JetBrains ANTLR 4 plugin, that
manifests itself when the GQL lexer and parser rules are in two separate files. The ANTLR
plugin for JetBrains is extremely useful, during the development of the grammar and
development of implementations that use the grammar, so they've been combined into a
single file: GQL.g4. The lexer rules are at the bottom of the file.

[GQL Parser for Go](https://github.com/mburbidg/gql-parser) is an example of a repository that uses the GQL ANTLR grammar by including this repository as a submodule.

## Creation of the ANTLR Grammar File
The original version of the grammar file was generated using [gramgen](https://github.com/mburbidg/gramgen),
a command line program that generates an ANTLR parser and lexeer file from an XML representation of the BNF for the GQL grammar. The XML file is
an artifact of the official ISO Specification for GQL.

This generated version was then hand tweaked to make it more suitable for
ANTLR consumption. Among other changes, mutually left recursive productions were folded into
parent productions. The main focus of the changes were related to the _value expression_
and _primary value expression_ productions.

## Permissiveness
The Grammar itself is more permissive than a GQL implementation would be. Some
type checking and other syntatic analysis would be required as post-processing
steps to parsing using the grammar.

## Testing and Verification
Not a lot of testing has been done to date, besides spot checking using
various hand generated snippets of GQL. In the future this grammar will be
validated using a [Test Compatibilty Kit (TCK)](https://en.wikipedia.org/wiki/Technology_Compatibility_Kit) for GQL.

# Todo
- End of line comments

